<div
  #chatContainer
  [style.height]="chatContainerHeight"
  (scroll)="onScroll($event)"
  (mouseover)="isManualScroll = true"
  (touchstart)="isManualScroll = true"
  class="chats"
>
  <app-skeleton-loader
    *ngIf="isLoading && !isFullyLoad"
    count="6"
  ></app-skeleton-loader>
  <app-message
    #messageComponent
    *ngFor="let chat of chats; let i = index"
    [name]="chat.user?.name"
    [user_id]="chat.user?.id"
    [message]="chat.content"
    [date]="chat?.createdAt"
    [attaches]="chat?.meta?.attaches"
    [isHideProfile]="isHideName(chat, i)"
    [color]="chat?.user?.color || '#46a35e'"
    [isShowTime]="true"
  ></app-message>
</div>


<div
  *ngIf="!room"
  class="loader"
>
  <app-skeleton-loader
    count="10"
  ></app-skeleton-loader>
</div>

<div
  class="footer"
  [style.width]="footerWidth"
>
<input
  #fileInput
  type="file"
  class="fileInput"
  (change)="onFileSelected($event)"
/>
<div
*ngIf="files?.length > 0"
class="attachment"
>
  <app-thumbnail
    *ngFor="let file of files"
    (click)="openAttachDeleteDialog(file)"
    [isClickable]="true"
    [src]="getSrcText(file)"
  ></app-thumbnail>
</div>
  <mat-error *ngIf="chatErrorMessage">
    {{ chatErrorMessage | translate }}
  </mat-error>
  <mat-progress-bar
    *ngIf="uploadingFiles > 0"
    mode="indeterminate"
  ></mat-progress-bar>
  <mat-form-field
    (touchstart)="isMultiLineEnabled = true"
    (mousedown)="this.message?.length === 0 ? isMultiLineEnabled = false : null"
    appearance="outline"
  >
    <textarea
      matInput
      appTextareaAutoResize
      [(ngModel)]="message"
      [disabled]="isDisabled || uploadingFiles > 0"
      [placeholder]=" (isDisabled ? 'GROUP.ROOM.CHAT.DISABLED' : 'GROUP.ROOM.CHAT.WRITE_A_MESSAGE') | translate"
      [multiline]="isMultiLineEnabled"
      (keyup.enter)="onSendKeyPress($event, message)"
      (keydown.control.enter)="makeNewLine($event)"
      (heightUpdate)="onChatFieldResize($event)"
      id="chat_message_input"
      type="text"
      autocomplete="off"
      
    ></textarea>

    <button
      mat-icon-button
      matSuffix
      [attr.aria-label]="'GROUP.ROOM.CHAT.ATTACH_A_FILE' | translate"
      (click)="onFileButtonClick()"
    >
      <mat-icon matSuffix>attach_file</mat-icon>
    </button>

    <button
      *ngIf="!isShortWidth"
      mat-icon-button
      matSuffix
      [attr.aria-label]="'GROUP.ROOM.CHAT.EMOJI' | translate"
    >
      <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
    </button>
    <button
      #send_button
      mat-icon-button
      matSuffix
      (click)="onSendExecute(message)"
      [attr.aria-label]="'GROUP.ROOM.CHAT.SEND' | translate"
    >
      <mat-icon
        matSuffix
      >send</mat-icon>
    </button>
  </mat-form-field>
</div>

